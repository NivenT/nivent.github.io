---
layout: post
title: "A Tour of Some Number Theory: Part I: Elliptic Curves"
modified:
categories: blog
excerpt:
series: "NT Tour"
tags: [math, number theory, algebraic number theory, geometry, algebraic geometry, elliptic curves, algebraic curves, schemes, galois representation]
date: 2020-03-31
---

I have a vague vision in my head of a series of posts designed to help me, and maybe also you, understand (parts of) the relationship between a few objects of interests in algebraic number theory: elliptic curves, selmer groups, binary quartic forms, and modular forms [^1]. I don't know the whole story encompassing these objects, but allegedly, they are all linked in one way or another, and I have soft plans to understand these links over the next $n$ days. To aid in this, I hope to write (medium length to long [^8]) posts on each of these objects, drawing attention to their relationships to each other, and also including some facts/results I find interesting even if they don't necessarily lie at the intersection of the study of e.g. elliptic curves and quartic forms. It seems most appropriate to begin this series with elliptic curves since they are the main reason I care about any of the other stuff.

While trying to come up with a rough idea for what I was going to say in this post, I ran into the issue of what my definition of an elliptic curve should be. On the one hand, I don't think I will need anything too fancy for the main things I want to talk about in these posts, so I could probably get away with saying an elliptic curve $E$ is the zero set of a polynomial of the form $E:y^2+a_1xy+a_3y=x^3+a_2x^2+a_4x+a_6$ and not worry about having to prove anything annoying. On the other hand, having access to things like Riemann-Roch and the Picard group is really useful for understanding the group structure on elliptic curves, but being able to use these things requires much more setup. In the end, I decided that since I have already said words like [\spec](../comm-alg) and [sheaf](../cover-fundgrp-sheaf) on this blog before, the added work needed to be able to say Riemman-Roch is worth it, so I'll start with a quick and probably mostly unhelpful introduction to schemes [^7], and then focus on curves [^2].

Finally, just to make things clear, for the main purpose of this post (setting the basics of elliptic curves, so we can later see how they connect to some other things), you can probably just skip to the section titled "Elliptic Curves," read from there, and take some things for granted. The parts before that section are mostly here for technical completeness and for me to see if I actually know anything about geometry [^23].

1. TOC
{:toc}

# A Quick(ish) Introduction to Schemes

We will begin with some motivation for the eventual definition of a scheme. This will motivation will take the form of a definition of a $\smooth$ manifold. Usually, one thinks of a $\smooth$ manifold $X$ as a topological space satisfying some technical conditions (e.g. must be Hausdorff and paracompact) which moreover, and most essentially, "locally looks like $\R^n$". The standard way to make sense of this last condition, is to say that $X$ is covered by opens (i.e. charts) $\bracks{U_\alpha}_ {\alpha\in A}$ each coming with a homeomorphism $\phi_\alpha:U_\alpha\to\R^n$. However, this is not enough, because we want $X$ to be $\smooth$, so we require furthermore that the "transition functions" $\phi_{\alpha\beta}:\phi_\alpha(U_{\alpha\beta})\to\phi_\beta(U_{\beta\alpha})$ (here, $U_{\alpha\beta}:=U_\alpha\cap U_\beta$) defined by $\phi_{\alpha\beta}=\phi_\beta\circ\inv\phi_\alpha$ are $\smooth$ in the normal calculus sense (since they are maps between open subsets of $\R^n$). The point of having all these charts and smooth overlap conditions, is that they allow you to make sense of the notion of a smooth function $X\to\R$ because smoothness is a local condition and we already know what it means for a function $\R^n\to\R$ to be smooth. 

This might make you wonder, if we really care about smooth functions $X\to\R$, why not start with these instead of starting with charts? One can do this, and this is closer to what one does in the algebraic setting. Still on the topic of manifolds, note that the presheaf

$$\smooth_{\R^n}(U)=\bracks{\text{smooth functions }f:U\to\R}$$

on $\R^n$ is indeed a sheaf, and hence the pair $(\R^n,\smooth_{\R^n})$ form a so-called <bf>ringed space</bf> (i.e. a space with a choice of sheaf of rings). With this as a prototypical example of a ringed space (in the setting of $\smooth$ manifolds), one can now define a $\smooth$ manifold to be a (Hausdorff, paracompact) topological space $X$ with a sheaf $\ints X$ such that $(X,\ints X)$ is locally isomorphic to $(\R^n,\smooth_{\R^n})$, i.e. there exists an open cover $\bracks{U_\alpha}$ of $X$ such that $(U_\alpha,\ints{U_\alpha})\simeq(\R^n,\smooth_{\R^n})$ for all $\alpha$. Here, $\ints{U_\alpha}$ is the sheaf $\ints{U_\alpha}(V)=\ints X(U_\alpha\cap V)$ for any open $V\subset U_\alpha$. This is the same definition of smooth manifold as the standard one, but now we don't worry about transition functions or about including a choice of atlas [^3] in the datum of a smooth manifold [^4].

There are a few things I should clarify. First, I never said what a morphism of ringed spaces is, and so the requirement that $(U,\ints{U_\alpha})$ be isomorphic to $(\R^n,\smooth_{\R^n})$ is not yet well-defined. Intuitively, a morphism $f:(X,\ints X)\to(Y,\ints Y)$ between ringed spaces should be a continuous map $X\to Y$ and a map of sheaves $\ints X\to\ints Y$, but these sheaves live on different spaces, so we need a way to transfer sheaves from one space to another. There are two natural ways to do this.

<div class="definition">
    Let $f:X\to Y$ be a continuous map, and let $\msF$ be a presheaf on $X$. Then, the <b>direct image presheaf</b> $\push f\msF$ on $Y$ is given by
    $$(\push f\msF)(V)=\msF(\inv f(V)).$$
    This is a sheaf when $\msF$ is in which case we call it the direct image sheaf (as opposed to presheaf).
</div>
<div class="definition">
    Let $f:X\to Y$ be a continuous map, and let $\msG$ be a presheaf on $Y$. Then, the <b>inverse image sheaf</b> $\inv f\msG$ on $X$ is the sheafification of the presheaf
    $$U\mapsto\msG(f(U)):=\dirlim_{U'\supset f(U)}\msG(U')$$
    where the direct limit is taken over opens containing $f(U)$ (think of this presheaf as spitting out germs of sections above $f(U)$). We do not denote this by $\pull f$ because that is a different operation we will see later.
</div>

Hence, we have a choice in our definition of a morphism $(X,\ints X)\to(Y,\ints Y)$ of ringed space. It could either [^5] be a pair $(f',\sharp f)$ of a continuous function $f':X\to Y$ and a morphism $\sharp f:\ints Y\to\push f\ints X$ or a pair $(f',f^\flat)$ of a continuous function $f':X\to Y$ and a morphism $f^\flat:\inv f\ints Y\to\ints X$. Thankfully for us, these two definitions are equivalent because of the following.

<div class="proposition">
    Let $f:X\to Y$ be continuous, and let $\Ab(X)$ denote the category of abelian sheaves on $X$. Then, the functors $\push f:\Ab(X)\rightleftarrows\Ab(Y):\inv f$ are adjoint. That is, we have functorial isomorphisms
    $$\Hom_{\Ab(X)}(\inv f\msG,\msF)\iso\Hom_{\Ab(Y)}(\msG,\push f\msF).$$
</div>
<div class="proof4">
    Take my word for it or go through the trouble of proving this yourself. If you choose the latter, it helps to first construct natural maps $\msG\to\push f\inv f\msG$ and $\inv f\push f\msF\to\msF$ for $\msG\in\Ab(Y)$ and $\msF\in\Ab(X)$. Then the above isomorphism is given by applying $\push f$ or $\inv f$ followed by composing with one of these maps, which you can show by computing what these compositions do at stalks.
</div>

Now that we have a notion of morphism of ringed spaces, our earlier definition of a smooth manifold as a ringed space that looks locally like $(\R^n,\smooth_{\R^n})$ makes sense.

<div class="exercise">
    Show that the ringed space definition of a $\smooth$ manifold is the same as the standard definition, including showing that sections $s\in\ints X(U)$ of the structure sheaf can be identified with smooth functions $U\to\R$.
</div>
<div class="exercise">
    Show that if $f=(f',\sharp f):(X,\ints X)\to(Y,\ints Y)$ is a morphism of ringed spaces, then it induces local maps $\sharp f_x:\ints{Y,f(x)}\to\ints{X,x}$ on stalks.
</div>

Now that we know what ringed spaces are and have seen how we can use sheaves to nicely describe spaces formed by gluing together ones we care about, let's define schemes.

## Schemes

First, to get this out of the way, a <bf>locally ringed space</bf> $(X,\ints X)$ is a ringed space such that the stalks $\ints{X,x}$ are local rings. For a locally ringed space $(X,\ints X)$ and a point $x\in X$, we define the <b>residue field at $x$</b> to be

$$\kappa(x):=\ints{X,x}/\mfm_x\text{ where }\mfm_x\text{ is the (unique) maximal ideal of }\ints{X,x}.$$

A morphism of locally ringed spaces is a morphism $f:(X,\ints X)\to(Y,\ints Y)$ of ringed spaces such that the induced maps $\ints{Y,f(x)}\to\ints{X,x}$ are local (i.e. $\inv f(\mfm_x)=\mfm_{f(x)}$ where $\mfm_x\subset\ints{X,x}$ is the maximal ideal and similarly for $\mfm_{f(x)}\subset\ints{Y,f(x)}$). 

Now, schemes are basically algebraic manifolds, except the phrase "algebraic manifold" already [refers to something else](https://www.wikiwand.com/en/Algebraic_manifold). Our model space/protypical example will be the affine schemes $\spec A$ where $A$ is any (commutative) ring (with unity). Recall that $\spec A=\bracks{\text{prime ideals }\mfp\subset A}$ and we topologize it by giving it the Zariski topology whose closed sets are the ones of the form $V(I)=\bracks{\mfp\supset I}$ for $I\subset A$ an ideal. We need to give this space a structure sheaf $\ints A=\ints{\spec A}$ which we want to think of as the "sheaf of (regular) functions". It is clear that we should have $\ints A(\spec A)=A$ [^6]. Similarly, given $a\in A$, the basic open $D(a)=\bracks{\mfp\in\spec A:a\not\in\mfp}$ ("points where $a$ does not vanish") satisfies $D(a)\simeq\spec A_a$ (at least topologically), so we should have $\ints A(D(a))=A_a$. Now, because sheaves are defined locally, because these $D(a)$ for a base for the topology on $\spec A$, and because $D(a)\cap D(b)=D(ab)$, this actually uniquely characterizes a sheaf on $\spec A$, which we unsurprisingly call $\ints A$. That is,

<div class="proposition">
    Let $A$ be a ring. Then, there is a unique sheaf $\ints A$ on $\spec A$ such that $\ints A(D(a))=A_a$ for any basic/distinguished open $D(a)\subset\spec A$. Slightly more concretely, for any open $U\subset\spec A$, we have
    $$\ints A(U)=\invlim_{D(a)\subset U}A_a.$$
</div>
<div class="proof4">
    Uniqueness is easy because any sheaf is determined by what it does on a base. We have a presheaf defined (the transition maps are what they have to be), so we'd only need to show that this is a sheaf. To do this, you can reduce to coverings (of a given open $U$) back basic opens $D(a_i)$ ($i\in I$), and then the ability to uniquely glue (compatible) sections overs of these basic opens will ultimately boil down to the universal property of localizations (and in particular, uniqueness of the localization map $A_{a_i}\to A_{a_ia_j}$).
</div>

One can give other, possibly more concrete, constructions of $\ints A$.

<div class="exercise">
    Show that $\ints A$ is the sheafification of the presheaf $U\mapsto\inv S_UA$ where $$S_U=\bracks{a\in A:\mfp\in U\implies a\not\in\mfp}=\bigcap_{\mfp\in U}(A\sm\mfp).$$
</div>
<div class="exercise">
    Fix an $A$-module $M$. Given a closed set $Z\subset\spec A$, let $I(Z)=\bigcap_{\mfp\in Z}\mfp$. Given an open $U\subset\spec A$, show that
    $$\wt M(U)=\dirlim_n\Hom_A(I(X\sm U)^n,M)$$
    defines a sheaf $\wt M$ on $\spec A$, and in particular, $\wt A\simeq\ints A$. These sheaves are called <b>quasi-coherent</b>. In general, if $X$ is a (not necessarily affine) scheme, any sheaf which locally looks like $\wt M$ is called quasi-coherent. 
</div>
<div class="exercise">
    Show that $\ints{A,\mfp}=A_\mfp$, i.e. that the stalk of the structure sheaf is the localization at the prime.
</div>

Any locally ringed space isomorphic to the pair $(\spec A,\ints A)$ is called an <b>affine scheme</b>. In general, a <b>scheme</b> is a (locally) ringed space $(X,\ints X)$ which is locally isomorphic to affine schemes. A morphism of schemes is just a morphism of the underlying locally ringed spaces.

It is generally useful to know when a scheme $S$ is affine because affine schemes are the easiest to work with. We will not say much about figuring this out in general except to claim without proof that if $S\into\spec A$ is a closed immersion (to be defined below), then $S$ is affine, and furthermore, $S\simeq\spec A/I$ for some (not necessarily radical) ideal $I\subset A$.

I should also mention that if $X$ is a fixed scheme, and $S$ is another scheme, then we let $X(S)$ denote the set of morphisms $S\to X$. If $S=\spec A$ is affine, then we also write $X(A)=X(\spec A)$ for this set. We call the set $X(S)$ the set of <b>$S$-points of $X$</b>. For example, if $X=\spec\Z[x_1,\dots,x_n]/(f_1,\dots,f_m)$ and $S=\spec A$, then

$$X(A)=\bracks{\spec A\to\spec\Z[x_1,\dots,x_n]/(f_1,\dots,f_m)}=\bracks{\Z[x_1,\dots,x_n]/(f_1,\dots,f_m)\to A}=\bracks{a_1,\dots,a_n\in A:f_i(a_1,\dots,a_n)=0\,\forall i}$$

really should be thought of as the set of points of the vanishing set $V(f_1,\dots,f_m)$ with coordinates in $A$. If we are working with $Y$-schemes $X\to Y$ and $S\to Y$, then $X(S)$ only consists of the maps $S\to X$ which respect the given maps $X\to Y$ and $S\to Y$ (In this case, we really should denote the set $X_Y(S)$, but it's usually clear from context what we mean).

Now, schemes are too general to successfully study all at once, so there's a whole host of adjectives one can put in front of a scheme or morphism of schemes in order to make things more tractable. Usually, one spends weeks getting a feel for all these various adjectives, but we don't have time for that, so I'll just go ahead a define a few with little motivation/intuition.

<div class="definition">
    A scheme $X$ is called <b>reduced</b> if $\ints X(U)$ is a reduced ring (i.e. has no nilpotents) for all open $U\subset X$. It is called <b>integral</b> if $\ints X(U)$ is a domain for all open $U\subset X$ (equivalently, $X$ is reduced and irreducible). It is called <b>locally noetherian</b> if $\ints X(U)$ is noetherian for all open $U\subset X$. It is called <b>noetherian</b> if it is locally noetherian and compact (or quasi-compact as algebraic geometers like to call it) as a topological space.
</div>

<div class="definition">
    A morphism $f:X\to Y$ of schemes is called an <b>open immersion</b> if $f$ is topologically an embedding onto an open subset $U\subset Y$, and the map $f:X\to U$ is an isomorphism (where the structure sheaf on $U$ is $\ints U=\ints Y\vert_U$). It is called a <b>closed immersion</b> if it is topologically an embedding onto a closed subset of $Y$, and the map $\ints Y\to\push f\ints X$ is surjective.
</div>

The definition of a closed immersion is different from what one might expect because there is not a unique scheme structure on a closed subset of a scheme. For example, the closed set $\{(2)\}\subset\spec\Z$ is the underlying topological space for the closed subschemes $\spec\F_2\into\spec\Z$ and $\spec\Z/(4)\into\spec\Z$, but $\spec\F_2\neq\spec\Z/(4)$. The requirement that $\ints Y\to\push f\ints X$ be surjective mirrors the fact that, in the affine case, closed subschemes correspond to quotients of the ring of global functions. 

<div class="definition">
    A morphism $f:X\to Y$ of schemes is said to be <b>locally of finite type</b> if for any open affine $\spec A\subset Y$ and open affine $\spec B\subset\inv f(\spec A)$, the restricted map $f:\spec B\to\spec A$ (really, it's action on global sections) turns $B$ into a finitely generated $A$-algebra. We say it is <b>finite</b> if, for any affine open $\spec A\subset Y$, its preimage $\inv f(\spec A)=\spec B$ is affine an $B$ is a finitely generate $A$-module. We say $f$ is <b>quasi-compact</b> if for any quasi-compact $U\subset Y$, its preimage $\inv f(U)\subset X$ is quasi-compact too. We say $f$ is <b>of finite type</b> if it is both quasi-compact and locally of finite type.
</div>

There are other adjectives, like separated and proper, that I may throw around every now and then. Don't worry about them too much. Maybe if I end up putting (a version of) this post online, I'll come back here later and actually define them. I don't feel like doing it yet.

## Maps to Affine Schemes

It will be useful to prove a universal property for maps to affine space, so let's do that.

<div class="proposition">
    Let $A$ be a ring, and let $(X,\ints X)$ be a scheme. The natural map
    $$\alpha:\Hom(X,\spec A)\to\Hom(A,\ints X(X))$$
    taking a morphism $f$ to its action on global sections $\alpha(f)=\sharp f_{\spec A}:\ints A(A)\to\ints X(X)$ is bijective.
</div>
<div class="proof4">
    (Injectivity) Pick $f,g:X\rightrightarrows\spec A$ with $\alpha(f)=\alpha(g)$. We first claim that they agree on topological spaces. To see this, note that, for any $x\in X$, we have a commutative diagram
    $$\begin{CD}
        A @>\alpha(f)>> \ints X(X)\\
        @VVV @VVV\\
        A_{f(x)} @>\sharp f_x>> \ints{X,x}
    \end{CD}$$
    so taking the preimage of the maximal ideal $\mfm_x\subset\ints{X,x}$ under the composition $A\to\ints{X,x}$ along both routes, we see that
    $$f(x)=\inv{\alpha(f)}("\mfm_x")$$
    where "\mfm_x" with quotes is the preimage of $\mfm_x$ under the map $\ints X(X)\to\ints{X,x}$. Now, we have an analogous diagram with $g$ in place of $f$, so using that $\alpha(f)=\alpha(g)$, we see that
    $$f(x)=\inv{\alpha(f)}("\mfm_x")=\inv{\alpha(g)}("\mfm_x")=g(x),$$
    and hence $f,g$ agree on topological spaces. To see that they agree on sheaves, let $\mfp=f(x)=g(x)\in\spec A$, note that we have a commutative diagram
    <center>
        <img src="{{ site.url }}/images/blog/tour-nt-i/toaff.png" width="200" height="200">
    </center>
    By the universal property of $A_\mfp$, there is a unique map $A_\mfp\to\ints{X,x}$ factoring through the given map $A\to\ints{X,x}$, so $\sharp f_x=\sharp g_x$. Hence, $\sharp f=\sharp g$ as they agree on stalks, so $f=g$.
    <br>
    (Surjectivity) Pick some $\phi:A\to\ints X(X)$, and let $\{U_i\}_{i\in I}$ be an affine cover of $X$. Let $\phi_i:A\to\ints X(U_i)$ be the composition $A\xto\phi\ints X(X)\to\ints X(U_i)$, and let $f_i=\spec\phi_i:U_i=\spec\ints X(U_i)\to\spec A$, so, in particular, $\alpha(f_i)=\phi_i$. Note that $f_i\vert_{U_i\cap U_j}=f_j\vert_{U_i\cap U_j}$ for all $i,j\in I$ by injectivity of $\alpha$, so these $f_i$'s glue to give a global map $f:X\to\spec A$ and evidently, $\alpha(f)=\phi$.
</div>

Our main application of this will be in the case of the following space (possibly only when $n=1$).

<div class="definition">
    Fix a ring $A$. <b>Affine $n$-space over $A$</b> is the scheme $\A^n_A:=\spec A[x_1,\dots,x_n]$.
</div>
<div class="corollary">
    Fix a ring $A$, and let $X$ be an $A$-scheme (i.e. a scheme with a given morphism $X\to\spec A$). Then, a morphism (as $A$-schemes) $X\to\A^n_A$ is the same thing as the choice of $n$ global sections $s_1,\dots,s_n\in\ints X(X)$.
</div>

## Sheaf Cohomology 

It is impossible to study geometry without making use of cohomology, so I guess I should take some time to define a cohomology theory on sheaves. Fix a topological space $X$. Then, the category $\Ab(X)$ of abelian sheaves is an abelian category (i.e. you can talk about kernels, cokernels, exactness, and all that good stuff). In particular, given a morphism $f:\msF\to\msG$ of sheaves on $X$, we define its <b>kernel,cokernel,image</b> to be the sheafifications of the following presheaves

$$(\pker f)(U)=\ker(\msF(U)\to\msG(U)).$$

$$(\pim f)(U)=\im(\msF(U)\to\msG(U)).$$

$$(\pcoker f)(U)=\coker(\msF(U)\to\msG(U)).$$

As it turns out, one does not need to sheafify in the case of kernels, so $\ker f=\pker f,\pim f=(\pim f)^+,$ and $\pcoker f=(\pcoker f)^+$ where $^+$ is my notation for sheafification. With these defined, a sequence $\ms A\xto f\ms B\xto g\ms C$ of sheaves is called <b>exact</b> if $\ker g=\im f$. Note that this is weaker than requiring $\ker(\ms B(U)\to\ms C(U))=\im(\ms A(U)\to\ms B(U))$ for all open $U\subset X$. 

<div class="exercise">
    Show that $\ms A\xto f\ms B\xto g\ms C$ is exact iff the sequence of maps $\ms A_x\xto{f_x}\ms B_x\xto{g_x}\ms C_x$ on stalks is exact for all $x\in X$. In particular, a map of sheaves is surjective, injective, or bijective iff it is so on all stalks.
</div>

Now that we have a notion of exactness, we can talk about a functor being left/right exact and then form derived functors. Of note, let $\Gamma:\Ab(X)\to X$ be the <b>global sections functor</b> $\Gamma(\msF)=\msF(X)$. 

<div class="proposition">
    $\Gamma$ is left exact.
</div>
<div class="proof4">
    There are a few ways to see this.
    <ul>
        <li> You could show directly that given a short exact sequence $0\to\ms A\to\ms B\to\ms C\to0$ of sheaves, the sequence $0\to\ms A(X)\to\ms B(X)\to\ms C(X)$ remains exact. The main point here is that if you have a section $s\in\ker(\ms B(X)\to\ms C(X))$, then exactness at the sheaf level gives you local sections of $\ms A$ which map to (restrictions of) $s$ (i.e. by picking representatives of elements at the stalks), and these then glue by injectivity of $\ms A\to\ms B$. </li>
        <li> Alternatively, you could use the general fact that a functor is left exact iff it preserves kernels. Here, we clearly have that for $f:\ms A\to\ms B$ a morphism of sheaves, $\Gamma(\ker f)=\ker\parens{\Gamma(f):\ms A(X)\to\ms B(X)}$. </li>
        <li> A third possibility would be to show/observe that we have a natural isomorphism of functors
            $$\Gamma(\msF)=\Hom_{\Ab(X)}(\Z_X,\msF)$$
        where $\Z_X$ is the constant sheaf on $X$ with stalks equal to $\Z$, and then use that $\Hom$-functors are usually left exact. </li>
    </ul>
    In any case, the conclusion is the same.
</div>

This is (almost) all we need to define the sheaf cohomology groups $\hom^i(X,\msF)$ as the right-derived functors of $\Gamma$. As a technical condition, in order for this construction to exist, we need to know that $\Ab(X)$ has enough injective, i.e. that every abelian sheaf on $X$ embeds in an injective sheaf. This is true and can be deduced from the fact that $\Ab$, the category of abelian groups, has enough injectives + a clever construction [^9]. We won't do this in detail here partly because I'm lazy, and partly because we care mainly about curves, and so only care about cohomology in degrees 0,1 [^11]. We will see later [^15] that $\hom^1$ for the sheaves we care about (i.e. line bundles on curves) has a rather concrete description that will make it useful for computations. For now, the main things to know about cohomology are (1) that given a short exact sequence

$$0\too\ms A\too\ms B\too\ms C\too0$$

of sheaves on $X$, we get a long exact sequence

$$0\too\hom^0(\ms A)\too\hom^0(\ms B)\too\hom^0(\ms C)\too\hom^1(\ms A)\too\hom^1(\ms B)\too\hom^1(\ms C)\too\dots$$

in cohomology, and (2) cohomology for sheaves supported on a closed set $Z\subset X$ can be computed either on $Z$ or on $X$. Specifically,

<div class="theorem">
    Let $j:Z\into X$ be a closed immersion, and let $\msF$ be a sheaf of abelian groups on $Z$. Then, $\hom^i(Z,\msF)=\hom^i(X,\push j\msF)$ for all $i$.
</div>

The idea here is that there a special acyclic (i.e. higher cohomology vanishes) sheaves called "flasque sheaves," and the pushforward of a flasque resolution of $\msF$ is a flasque resolution of $\push j\msF$ (with the same global sections), so their cohomologies are literally computed by the same complex. This is an example of the intuition/slogan that "sheaves on a closed subset $Z\subset X$ are the same thing as sheaves on $X$ which vanish outside of $Z$." Because of this, we will often be lazy and omit the pushforward when considering sheaves on $X$ and sheaves on a closed subset in the same breath.

Before moving one, we'll make one quick definition.

<div class="definition">
    Given a sheaf $\msF$ on a space $X$, its <b>Euler characteristic</b> is
    $$\chi(\msF):=\sum_{n\ge0}(-1)^n\dim\hom^n(\msF)$$
    whenever this is well-defined.
</div>

## Line Bundles

Returning to our manifold motivation, (differential) geometers really seem to like vector bundles. If you're studying a manifold, then its common to also try to understand its tangent bundle, cotangent bundle, exterior powers of these, etc. With this in mind, it might make sense to define algebraic vector bundles. To motivate the definition more, consider a topological vector bundle $p:E\to B$ of rank $n$. From $p$, one can construct the sheaf

$$\msE_p(U)=\bracks{s:U\to E:p\circ s=1_U}$$

of local sections of $p$. Because $p$ is a vector bundle, it locally looks like $\R^n\by U\to U$, and so $\msE_p$ locally looks like $\ints U^{\oplus n}$ where $\ints U$ is the sheaf of (continuous or smooth or whatever) functions on $U$. In the algebraic context, we will take this sheaf $\msE_p$ as the definition of a vector bundle instead of the topological space $E$.

Let $(X,\ints X)$ be a ringed space. An $\ints X$-module $\msF$ is a sheaf on $X$ such that $\msF(U)$ is an $\ints X(U)$-module for all $U\subset X$, and such that the restriction maps $\msF(U)\to\msF(V)$ (when $V\subset U$) are compatible with restriction maps $\ints X(U)\to\ints X(V)$ in the evident sense. These form a category $\DeclareMathOperator{\Mod}{Mod}\Mod(X)=\Mod(X,\ints X)$ whose morphisms are exactly what you would expect. 

<div class="definition">
    An $\ints X$-module $\msF$ is said to be <b>locally free of rank $n$</b> if there exists an open cover $\bracks{U_i}$ of $X$ such that $\msF\vert_{U_i}\simeq\ints{U_i}^{\oplus n}$ for all $i\in I$. In this case, we also call $\msF$ a <b>vector bundle of rank $n$</b>, or a <b>line bundle</b> if $n=1$.
</div>

Given a vector bundle $\ms E$ on $X$ and a point $x\in X$, the <b>fiber of $\ms E$ above $x$</b> is the vector space 

$$\ms E(x):=\ms E_x\otimes\kappa(x)=\ms E_x\otimes\ints{X,x}/\mfm_x=\ms E_x/\mfm_x\ms E_x$$

whose dimension (over the residue field $\kappa(x)$) is equal to the rank of $E$ (since $\ms E_x\simeq\ints{X,x}^{\oplus\rank E}$). Given a section $s\in\msE(X)$ and a point $x\in X$, the value of this section at the point is the image $s(x)\in\ms E(x)$ of $s$ under the natural map

$$\ms E(X)\too\msE_x\too\ms E(x).$$

I guess the main thing we need to know about line bundles is how they play with direct/inverse images and cohomology. I'll just quote some results.

<div class="proposition">
    Let $f:X\to Y$ be a morphism of ringed spaces, and let $\msF$ be an $\ints X$-module. Then, $\push f\msF$ is an $\ints Y$-module.
</div>
<div class="proof4">
    Easy.
</div>

It is not the case that $\push f\msF$ is a line bundle when $\msF$ is. It is not even necessarily the case that $\push f\ints X$ is a line bundle (e.g. let $f$ be constant). Furthermore, the inverse image $\inv f\msG$ of an $\ints Y$-module does not even have to be an $\ints X$-module. To remedy this situation, we introduce

<div class="definition">
    Let $f:X\to Y$ be a morphism of ringed spaces, and let $\msG$ on an $\ints Y$-module. Then, the <b>inverse image</b> or <b>pullback module</b> is
    $$\pull f\msG:=\inv f\msG\otimes_{\inv f\ints Y}\ints X$$
    where the tensor operation on modules is the sheafification of the naive tensor presheaf.
</div>
<div class="proposition">
    If $\msG$ is a vector bundle, then so is $\pull f\msG$ (and they have the same rank).
</div>
<div class="proof4">
    Formation of the inverse image commutes with restriction, so we reduce to the case that $\msG=\ints Y^{\oplus n}$ where we get $\pull f\msG=\ints X^{\oplus n}$.
</div>

## Projective Space

At this point, we know what schemes are, we know what cohomology is, and we even know what line bundles are. All we have left before moving on is to (sort of) see an example of a non-affine scheme. I won't actually construct projective space where because that would be annoying, but I'll at least tell you about it. 

Fix a field $k$, and let $\DeclareMathOperator{\Sch}{Sch}\Sch_k$ denote the category of $k$-schemes, that is schemes $S$ equipped with a morphism $S\to\spec k$. It is clear that for any affine open $\spec A\subset S$ inside a $k$-scheme, $A$ is a $k$-algebra. Furthermore, given an $\ints S$-module $\msF$ on a $k$-scheme, its cohomology groups $\hom^i(\msF)$ are actually $k$-vector spaces. To study the geometry of curves, we want to understand their line bundles, so we introduce the following function $\DeclareMathOperator{\Set}{Set}P_n:\Sch_k\to\Set$

$$P_n(S)=\bracks{\parens{\msL,(s_0,\dots,s_n)}:s_0,\dots,s_n\in\Gamma(\msL)\text{ have no common zeros}}$$

which spits out the collection of all sets of $n+1$ linearly independent sections of a line bundle on $P_n$. The main thing one needs to know about this functor is

<div class="theorem">
    The functor $P_n$ is representable. That is, there exists a $k$-scheme $\P^n=\P_k^n$ such that, for all $k$-schemes $S$, we have
    $$P_n(S)=\P^n(S):=\Hom_{\Sch_k}(S,\P^n).$$
    We call this scheme <b>$n$-dimensional projective space over $k$.</b> It is integral, of finite type, and proper.
</div>

One takeaway from the above theorem is that, whatever projective space is, we know that we can give a map into it by specifying a line bundle along with some linearly independent global sections of it. In particular, the identity morphism $\P^n\to\P^n$ corresponds to some line bundle $\ints{\P^n}(1)$ on $\P^n$ with $n+1$ linearly independent global sections (which we think of as "homogeneous coordinates" on $\P^n$). Via Yoneda-type reasoning, given any morphism $f:S\to\P^n$ of $k$-schemes, the data on $S$ determining this morphism is the line bundle $\msL:=\pull f\ints{\P^n}(1)$ with sections the pull-backs of the homogeneous coordinates of $\P^n$.

I do not think this is apparent from the above characterization, but it is a fact that $\P^n$ can be covered by $n+1$ affine opens, commonly denoted $D_+(x_i)$ for $i=0,\dots,n$. In fact, mirroring the classical construction of projective space, 

$$D_+(x_i)\simeq\spec k\sqbracks{\frac{x_0}{x_i},\dots,\frac{x_{i-1}}{x_i},\frac{x_{i+1}}{x_i},\dots,\frac{x_n}{x_i}}\simeq\A^n_k$$

for all $i$, and these affines are glued how you would expect. For example, to form $\P^1$, we glue $D_+(x_0)=\spec A\sqbracks{\frac{x_1}{x_0}}$ to $D_+(x_1)=\spec A\sqbracks{\frac{x_0}{x_1}}$ via the map $f:D_+(x_0)\to D_+(x_1)$ sending $x_0/x_1\mapsto x_1/x_0$. Put, perhaps more clearly, $\P^1$ is formed by gluing $\spec k[x]$ to $\spec k[y]$ (along the open subsets formed by removing the origin) via $x\leftrightarrow\inv y$.

# Generalities on Algebraic Curves

We know can move away from the abstract generalities a bit and focus on something a little more down-to-earth.

<div class="definition">
    Let $R$ be a local ring with maximal ideal $\mfm$ and residue field $k$. We say $R$ is a <b>regular local ring</b> if $\dim R=\dim_k\mfm/\mfm^2$ where $\dim R$ is its Krull dimension.
</div>
<div class="definition">
    Given a field $k$, a <b>curve</b> $C$ over $k$ is an integral, separated scheme of finite type over $k$ whose underlying topological space is 1-dimensional. If all of $C$'s local rings are regular, then we say $X$ is <b>nonsingular (or smooth)</b>. We will sometimes write $C/k$ to denote that $C$ is a curve over $k$.
</div>

One of the nice things about smooth curves is that their local rings are about as nice as you could ask for.

<div class="proposition">
    If $C$ is a smooth curve over a field $k$, then its local rings $\ints{C,p}$ at the closed points $p\in C$ are Dedekind domains.
</div>
<div class="proof4">
    Fix a closed point $p\in C$. Recall that
    $$\ints{C,p}=\dirlim_{U\ni p}\ints C(U).$$
    First, since $C$ is integral, $\ints C(U)$ is a domain for all open $U$, so $\ints{C,p}$ is a domain too. Second, let $\spec A\ni p$ be an affine neighborhood around $p$, and let $\mfp\subset A$ be the prime ideal corresponding to $p$. Since $C\to\spec k$ is finite type, $A$ is a finitely generated $k$-algebra and so noetherian by Hilbert basis. Hence, $\ints{C,p}=\ints{A,p}=A_\mfp$ is noetherian as well. Finally, $\spec A\subset C$ is an open subset of an irreducible space, so $\dim A=\dim\spec A=\dim C=1$. Since $\mfp\subset A$ is a nonzero prime (since $p$ a closed point), we see that $\dim A_\mfp=\dim A=1$, so $\ints{C,p}$ is a 1-dimensional noetherian domain. To show that it is a Dedekind domain (in fact, a dvr since it is local), we only need to show that it is integrally closed. We will in fact do one better by showing that it is a UFD. By Kaplansky's Criterion, it suffices to show that every nonzero prime ideal of $\ints{C,p}$ contains a prime element. Since $\ints{C,p}$ is 1-dimensional, local this is the same as requiring that its maximal ideal $\mfm\subset\ints{C,p}$ be principal, but this is an immediate consequence of Nakyama's lemma + the fact that $\dim_k\mfm/\mfm^2=\dim\ints{C,p}=1$.
</div>

The above theorem tell us that the local rings $\ints{C,p}$ of a smooth curve are discrete valuation rings (when $p$ is a closed point), so for a closed point $p\in C$, we let $v_p:\units{k(C)}\to\Z$ denote the corresponding discrete valuation where $k(C)=\Frac\ints{C,q}$ (for any possibly non-closed $q\in C$) is the <b>function field</b> of $C$.

## Divisors

Now, the main purpose of this section is to gain some understanding of the structure of line bundles on a smooth curve. To that end, we make the following definition.

<div class="definition">
    Let $C$ be a smooth curve over $k$. The group $\Div C$ of <b>divisors on $C$</b> is the free abelian group on the closed points of $C$. If $D=\sum n_p\cdot[p]\in\Div C$, then we let $v_p(D)=n_p$ be its coefficient corresponding to the (closed) point $p$.
</div>

Given two divisors $D,E\in\Div C$, we write $D\ge E$ if $v_p(D)\ge v_p(E)$ for all $p\in C$. We say a divisor $D$ is <b>effective</b> if $D\ge0$.

<div class="example">
    Let $f\in k(C)$ be a nonzero meromorphic function. Then,
    $$(f):=\sum_{p\in C}v_p(f)\cdot[p]$$
    is a so-called <b>principal divisor</b>.
</div>

Fix a smooth curve $C$.
Let $k(C)_ C$ denote the constant sheaf with stalks equal to $k(C)$. [^12] Note that $k(C)_ C(U)=k(C)$ for all $U\subset C$ since $C$ is irreducible. Given a divisor $D\in\Div C$, let $\ints X(D)\subset k(C)_ C$ denote the subsheaf

$$\ints C(D)(U)=\bracks{f\in k(C):v_p(f)+v_p(D)\ge0\,\forall p\in U}.$$

This is a line bundle (exercise [^13]) and the map $D\mapsto\ints C(D)$ gives a group homomorphism $\Div C\to\Pic C$, where $\Pic C$ is the group of line bundles (group operation given by tensoring). This map is surjective (we'll see a dumb proof of this later) and its kernel is given exactly by the subgroup of principal divisors. To see this second part, note that if $f\in k(C)$, then multiplication by $f$ gives an isomorphism $\ints C(f)\iso\ints C$. Conversely, if $\ints C\iso\ints C(D)$, then $D=(1/f)$ where $f$ is the image of $1\in\Gamma(\ints C)$. With that said, let $\Cl C=\Div C/\units{k(C)}$ denote the <b>Divisor class group</b> of $C$. We've shown that $\Cl C\into\Pic C$, and we've claimed this is actually an isomorphism.

<div class="exercise">
    Let $p\in C$ be a closed point in a smooth curve. Show that the line bundle $\ints C(-p)$ can be naturally identified with the "ideal sheaf" $\msI_p$ given on an open $U\subset C$ by
    $$\msI_p(U)=\bracks{s\in\ints C(U):s(p)=0\text{, i.e. }s_p\in\mfm_p\subset\ints{C,p}}.$$
</div>

Hence, the study of line bundles on $C$ is tied up in the study of its divisors. We're interested in understanding the sizes $h^0(D)=\dim_k\hom^0(\ints C(D)),h^1(D)=\dim_k\hom^1(\ints C(D))$ of the cohomology groups of $C$'s divisors. We'll gain this understanding in the form of the Riemann-Roch formula which will appear in a few (sub)sections.

An important notion when studying divisors on curves, is the notion of a divisor's degree. First, a bit of notation. Given a (possibly non-closed) point $x$ is a locally ringed space $(X,\ints X)$, the <b>residue field at $x$</b> is the field

$$\kappa(x):=\ints{X,x}/\mfm_x$$

where $\mfm_x\subset\ints{X,x}$ is the (unique) maximal ideal, i.e. $\kappa(x)$ is the residue field of the local ring at $x$. With that said

<div class="definition">
    Let $D\in\Div C$ be a divisor on a smooth curve $C$ over a field $k$. Then, the degree of $D$ is
    $$\deg D=\sum_{p\in C}[\kappa(p):k]v_p(D).$$
</div>

We wish to show that this descends to a map on class groups, i.e. that principal divisors have degree $0$. To do this, we will first show that nonzero elements of the function field $k(C)$ of $C$ are basically just morphisms $C\to\P^1$. 

Let $f\in k(C)$ be nonzero. Let $Z,P\subset C$ be its set of zeros/poles, respectively. Then, $f\in\Gamma(C\sm P,\ints C$ and so determines a map $C\sm P\xto f\A^1_k$. Similarly, $1/f$ determines a map $C\sm Z\xto{1/f}\A^1_k$. We can glue these two maps together in other to form a map $C\xto f\P^1$. Using that $k(\P^1)=k(t)=\Frac k[t]$, we can recover $f\in k(C)$ from the morphism $C\to\P^1$ it defines as the image of $t$ under the map $k(\P^1)\to k(C)$ arising from this morphism (i.e. the induced map on stalks at the generic points).

Now, we'd like to be able to use morphisms between curves to relate divisors on them. To this end, let $f:X\to Y$ be a morphism (non constant) between smooth curves. We use $f$ to define two maps on divisors

$$\begin{matrix}
    \push f:& \Div X &\too& \Div Y && \pull f:&\Div Y &\too& \Div X\\
    &[p] &\longmapsto& [\kappa(p):\kappa(f(p))]\cdot[f(p)] &&& [q] &\longmapsto& \sum_{p\to q}e(p/q)\cdot[p]
\end{matrix}$$

where $e(p/q)=v_p(t_q)$ where $t_q\in\ints{Y,q}$ is a uniformizer. Furthermore, since $f$ is non-constant (and all curves are assumed irreducible), it must be surjective (its image is an irreducible subset of a 1-dimensional space and bigger than 1 point). From this, we can conclude that $f$ maps $\eta_X$, the generic point of $X$, to $\eta_Y$, the generic point of $Y$. This is because the generic point of a space (which always exists for irreducible schemes) is the unique point contained in all of its open sets and so

$$\inv f(\eta_Y)=\inv f\parens{\bigcap_{W\ni\eta_Y}W}=\bigcap_{W\ni\eta_Y}\inv f(W)\ni\eta_X$$

where we used surjectivity of $f$ to know that $\inv f(W)\neq\emptyset$ for every open set $W$ (containing $\eta_Y$). The upshot of this is that $f$ induces a map $k(Y)=\ints{Y,\eta_Y}\to\ints{X,\eta_X}=k(X)$ on function fields, and so we define $\deg f=[k(X):k(Y)]$. Now, we get the following theorem.

<div class="theorem">
    Let $f:X\to Y$ be a finite morphism between curves. Then, (1) $\deg\pull fD=(\deg f)\deg D$, (2) $\deg\push fD=\deg D$, and (3) $\push f\pull fD=(\deg f)D$ for any divisor $D$.
</div>
<div class="proof4">
    Maybe I'll come back and fill this in when I'm feeling less lazy.
</div>
<div class="corollary">
    Let $C$ be a smooth curve, and pick $f\in\units{k(C)}$. Then, $\deg(f)=0$.
</div>
<div class="proof4">
    From the discussion on $f$ as a map $C\to\P^1$, it is clear that $(f)=\pull f[0]-\pull f[\infty]$, so $\deg(f)=(\deg f)\deg([0]-[\infty])=0$.
</div>

## Differentials

Our next aim is to construct the so-called canonical bundle which will be a non-arbitrary line bundle we can write down for any smooth curve $C$. Fix a smooth curve $C$ over a field $k$.

For an affine open $\spec A\subset C$, let $\Omega_{A/k}$ denote the <b>module of (Kahler) differentials</b> which is the $A$-module generated by the symbols $\d a$ for all $a\in A$ subject to the relations
<ul>
    <li> $\d c=0$ if $c\in k$ </li>
    <li> $\d(a+b)=\d a+\d b$ </li>
    <li> $\d(ab)=a\d b+b\d a$ </li>
</ul>

<div class="exercise">
    A <b>$k$-linear derivation</b> on $A$ is a $k$-linear map $d:A\to M$ to an $A$-module $M$ such that $d(ab)=adb+bda$ for all $a,b\in A$ and $d(c)=0$ if $c\in k$. Show that the map $A\ni a\mapsto da\in\Omega_{A/k}$ is the universal $k$-linear derivation in the sense that for any $A$-module $M$, we have
    $$\DeclareMathOperator{\Der}{Der}\Hom_A(\Omega_{A/k},M)\iso\Der_k(A,M)$$
    with isomorphism given by composition with this map.
</div>
<div class="exercise">
    For a multiplicative set $S\subset A$, we have $\sinv\Omega_{A/k}\simeq\Omega{\sinv A/k}$.
</div>

From a previous exercise, the $A$-module $\Omega_{A/k}$ gives rise to an $\ints A$-module $\wt{\Omega_{A/k}}$ on $\spec A$. Because formation of the module of differentials plays well with localizations [^14], we can glue together the various sheaves $\wt{\Omega_{A/k}}$ to get a global sheaf $\omega_C=\Omega_{C/k}$ of differentials on $C$.

<div class="theorem">
    The sheaf $\omega_C$ is a line bundle.
</div>
<div class="proof4">
    Omitted. See e.g. Hartshorne.
</div>

Differentials are useful in differential topology/geometry, so this sheaf is probably rather important. In case this quantity pops up again later, let's go ahead and define the <b>genus</b> of $C$ to be $h^0(\omega_C):=\dim_k\hom^0(\omega_C)$ the dimension of global sections of $\omega_C$.

Now, one of the main utilities of differentials in algebraic geometry is their appearance in the following surprising and very useful theorem.

<div class="theorem">
    Let $\msL$ be a line bundle on a curve $C$. Then,
    $$\hom^1(\msL)\simeq\dual{\hom^0(\omega_C\otimes\dual\msL)}.$$
    In particular,
    $$h^1(\msL)=h^0(\omega_C\otimes\dual\msL)$$
    where $\dual\msL=\Hom(\msL,\ints C)$ is $\msL$'s dual bundle.
</div>

Originally, I planned on giving a proof of this theorem, but sadly, I think doing so would send us too far afield. Usually one proves a vast generalization of the above applying to higher dimensional schemes and far more sheaves than just bundles, but carrying this out would require more than a subsection of a blog post. There is a simpler proof just in the case of curves, but even it is too involved for me to justify reproducing here, so uh, just believe me on this one.

## Riemann-Roch

Now, given Serre duality [^16], proving Riemann-Roch will be child's play. In general, "Riemann-Roch" type theorems consist of two parts. The first part is a formula, usually of the form $\chi(\msF)=f(\msF)+\chi(\ints X)$, for computing the Euler characteristic of a vector bundle in terms of that of the structure sheaf. In a sense that is hard to make precise, the function $f$ usually only depends coarsely on $\msF$ [^17]. The second part is a formula for $\chi(\ints X)$. We will begin, perhaps unsurprisingly, with the first part.

<div class="theorem">
    Let $D$ be a divisor on a smooth curve $C$, and let $\msL=\ints C(D)$. Then,
    $$\chi(\msL)=\deg D+\chi(\ints C).$$
</div>
<div class="proof4">
    We induct on $\abs{\deg D}$. Fix a divisor $D$ for which the claimed equality is known to hold (e.g. $D=0$), and let $p\in C$ be a closed point. We'll show that it holds for $D+p$ as well (there's also a $D-p$ case, but I'll leave that to you). Note that $\ints C(-p)$ is naturally a subsheaf of $\ints C$, and the quotient $\ints p$ is a sheaf on the closed set $\{p\}\subset C$ (i.e. the stalks $\ints{p,x}\subset\ints{C,x}$ vanish at all $x\in C$ except $x=p$). Hence, we have an exact sequence
    $$0\too\ints C(-p)\too\ints C\too\ints p\too0.$$
    Now, tensoring with vector bundles is exact (because exactness can be checked at stalks and bundles are free modules at stalks) so we can tensor the above with $\ints C(D+p)$ to get an exact sequence
    $$0\too\ints C(D)\too\ints C(D+p)\too\ints p\too0.$$
    The cokernel does not change e.g. because it is a line bundle on a point and there's only one of those. Looking in cohomology, we get the sequence
    $$0\too\hom^0(\ints C(D))\too\hom^0(\ints C(D+p))\too\kappa(p)\too\hom^1(\ints C(D))\too\hom^1(\ints C(D+p))\too0$$
    where $\hom^1(\ints p)=0$ since this sheaf is supported on a 0-dimensional space. Now, since the alternating sum of dimensions in any exact sequence starting at ending with $0$ is equal to $0$, we get
    $$h^0(\ints C(D))-h^0(\ints C(D+p))+[\kappa(p):k]-h^1(\ints C(D))+h^1(\ints C(D+p))=0$$
    from which we conclude that
    $$\chi(\ints C(D+p))=\chi(\ints C(D))+[\kappa(p):k]=\deg D+\chi(\ints C)+[\kappa(p):k]=\deg(D+p)+\chi(\ints C)$$
    and so win.
</div>

For the second part, we need to calculation $\chi(\ints C)=h^0(\ints C)-h^1(\ints C)$. We know from Serre duality that $h^1(\ints C)=h^0(\omega_C)=g$, so we really just need to calculate $h^0(\ints C)$. To do this, I'll need to make explicit an assumption that I have been making in my head this whole time. The stated definition of curve allows for schemes like the affine line $\A^1_k$, but this is space, for example, is somehow incomplete (think "non-compact"). Now, topological compactness is not as useful a notion for schemes as it is for manifolds; for example, all affine schemes are compact [^19], but $\A_k^n$ should not be considered complete since it is the analogue of $\R^n$. Hence, the right notion of algebraic compactness/completeness will be something else. For our purposes, it suffices to reason as follows: projective space $\P_k^n$ should be "algebraically compact" (& also "algebraically Hausdorff"), so if $C$ if complete, then the image of any map $C\to\P_k^n$ should be "algebraically compact" as well (since $C$ is), but this is just saying that the image should be closed (since $\P_k^n$ is "algebraically compact and Hausdorff"), so we say a curve $C$ is <b>complete</b> if the image of any morphism $C\to\P_k^n$ is closed. 

The correct notions of "algebraically compact" and "algebraically Hausdorff" are being proper and separated, but for out purposes, completeness as just defined suffices [^20]. From now on [^18], assume all curves are complete. With this assumption made

<div class="proposition">
    Let $C$ be a (complete) curve over $k$. Then, $\hom^0(\ints C)=k$.
</div>
<div class="proof4">
    Pick any global section $s\in\hom^0(\ints C)$. This corresponds to some morphism $s:C\to\A^1_k$. We can embed $\A_k^1\into\P_k^1$ to view $s$ as a morphism $C\to\P_k^1$ whose image is necessarily closed since $C$ is complete. This shows that $s(C)\neq\A_k^1$ (since $\A_k^1$ is not closed in $\P_k^1$) and that $s(C)$. Since $s(C)$ is closed in $\A_k^1$, it must then be a finite union of points, but $C$ is irreducible, so $s(C)$ is as well which means that $s(C)$ must be a single point, hence $s$ is constant.
</div>

Thus, $\chi(\ints C)=1-g$. In summary, the takeaways are

$$\begin{align*}
    \chi(\ints C(D))=\deg D+1-g && h^1(\ints C(D))=h^0(\omega_C(-D))
\end{align*}$$

where, given a line bundle $\msL$, $\msL(D)$ is shorthand for $\msL\otimes\ints C(D)$. Here are two consequences of the work that we have done.

<div class="proposition">
    Given a smooth curve $C$, $\deg\omega_C=2g-2$.
</div>
<div class="proof4">
    By Riemann-Roch + Serre duality, $g-1=\deg\omega_C+1-g$.
</div>
<div class="proposition">
    Every line bundle on a smooth curve $C$ comes from a divisor.
</div>
<div class="proof4">
    Fix a line bundle $\msL\in\Pic C$. Mirroring the proof of Riemann-Roch, we can show that for any $D\in\Div C$, we have $\chi(\msL(D))=\deg D=\chi(\msL)$. Hence, for $D$ of large degree, we have $\chi(\msL(D))>0\implies h^0(\msL(D))>0$, so $\msL(D)$ has some nonzero global section $s$. Let $D'$ be the effective (all nonzero coefficients) divisor
    $$D'=\sum_{p\in C}v_p(s)\cdot[p].$$
    Then, multiplication by $s$ given an isomorphism $\ints C(D')\iso\msL(D)$, so $\msL\simeq\ints C(D-D')$.
</div>

Worth noting: contained in the above proof is an argument for the fact that divisors with negative degrees have no nonzero global sections (any global section gives an effective divisor and you can't have an effective divisor of negative degree).

# Elliptic Curves

That was quite a bit longer than I originally intended, but we made it. We can now turn our attention to the actual intended focus of this post: elliptic curves. Fix a field $k$.

<div class="definition">
    An <b>elliptic curve</b> over $k$ is a pair $E=(C,\infty)$ such that $C/k$ is a smooth (complete) curve of genus $1$ over $k$, and $\infty\in C(k)$ is a chosen rational point (in particular, $\kappa(\infty)=k$).
</div>

This definition may be different from one you have seen before, so we will first show that it is actually the same as the classical one corresponding to the vanishing set of a cubic polynomial.

Fix an elliptic curve $E/k$. For any $n\in\Z$, let $D_n=n[\infty]\in\Div E$. Note that the canonical bundle $\omega_E$ is of degree $\deg\omega_E=2g(E)-2=0$ and has a nonzero global section $s\in\hom^0(\omega_E)$. Hence, $\omega_E=\ints E(s)$ where $(s)\in\Div E$ is an effective divisor of degree $0$, i.e. $\omega_E\simeq\ints E$ is trivial. Now, applying Riemann-Roch to the divisor $D_n$ defined before, we have

$$h^0(\ints E(D_n))=h^0(\ints E(-D_n))-h^0(\ints E(D_n))=\deg D_n+\chi(\ints E)=n$$

for all $n\ge1$ (since divisors with negative degree have no global sections). The constant $1$ function lives in $\hom^0(\ints E(D_n))$ for all $n\ge0$ (and generates it when $n=0$), so we can complete it to basis $\bracks{1,X}$ of $\hom^0(\ints E(D_2))$ which we then in turn complete to a basis $\bracks{1,X,Y}$ of $\hom^0(\ints E(D_3))$. Necessarily, $X$ has a double pole at $\infty$ (since $h^0(\ints E(D_n))=1$ for $n\in\bits$) and similarly $Y$ has a triple pole at $\infty$. Now, note that $\bracks{1,X,Y,X^2,XY}\subset\hom^0(\ints E(D_5))$ and we claim that these form a basis. This is because they all have different orders of vanishing at $p$, so for any $c_0,c_2,\dots,c_5\in k$, not all zero, we have

$$v_p(c_0+c_2X+c_3Y+c_4X^2+c_5XY)=\min\bracks{i:c_i\neq0}\le5\implies c_0+c_2X+c_3Y+c_4X^2+c_5XY\neq0.$$

Now, $\hom^0(\ints E(D_6))$ contains the 7 elements $1,X,Y,X^2,XY,Y^2,X^3$ which therefore must satisfy some nontrivial linear relation of the form [^21]

$$aY^2+a_1XY+a_3Y=bX^3+a_2X^2+a_4X+a_6.$$

Necessarily, two of the involved functions (those with nonzero coefficient) must have the same valuation at $P$, so $a,b\neq0$. We can divide through by $b$ to assume that $b=1$, and then replace $X,Y$ with $aX,aY$ to obtain

$$a^3Y^2+a_1a^2XY+a_3aY=a^3X^3+a_2a^2X^2+a_4aX+a_6.$$

Finally, dividing by $a^3$, we see that our elliptic curve $E$ satisfies a relation of the form

$$\label{wform}\begin{align}Y^2+a_1XY+a_3Y=X^3+a_2X^2+a_4X+a_6.\end{align}$$

I just said finally, but you potentially expected a simpler looking end result. This is the best we can do over an arbitrary field $k$, but if we further suppose that $\Char k\neq2,3$ then we can (simultaneously) replace $X$ by $(X-3a_1^2-12a_2)/36$ and $Y$ by $(Y-(a_2X+a_3)/2)/216$ [^22] to get a relation of the form $Y^2=X^3+aX+b$.

Before talking about the more arithmetic side of elliptic curves, I would like to explain to what extent these relations define the curve $E$, so fix $a_1,a_2,a_3,a_4,a_6\in k$ such that (\ref{wform}) holds. Then, we claim that $\parens{\ints E(D_3),(1,X,Y)}$ determines a morphism $f:E\to\P_k^2$. We need to check that $1,X,Y$ have no common zeros. Since these generate $\hom^0(\ints E(D_3))$, it suffices to check that there's no (closed) $p\in E$ s.t. $s(p)=0\in\ints E(D_3)(p)\simeq\kappa(p)$ for all $s\in\hom^0(\ints E(D_3))$. To see this, consider the exact sequence

$$0\too\ints E(-p)\too\ints E\too\ints p\too0.$$

Twist by $D_3$ (i.e. tensor with $\ints E(D_3)$) and look in cohomology to get

$$0\too\hom^0(\ints E(D_3-p))\too\hom^0(\ints E(D_3))\too\kappa(p)\too\hom^1(\ints E(D_3-p))=0,$$

where the last equality comes from Serre duality. The map $\hom^0(\ints E(D_3))\too\kappa(p)$ above is the evaluation map, so we see that it is surjective, i.e. that some section has nonzero evaluation at $p$. Hence, we do get a morphism $f:E\too\P_k^2$, and further analysis can be used to show that it is a closed embedding. Once you know this, one can show that the section $X,Y$ of $\ints E(D_3)$ extend to global sections of the line bundle $\ints{\P_k^2}(1)$ on $\P^2$ (i.e. that $X,Y$ are really linear functions on $\P^2$). Hence, the relation (\ref{wform}) is really prescribing a way to write $E$ as a hypersurface in $\P^2$ (i.e. $E$ is the vanishing set of the homogenization of that polynomial)

## Group Law

Now, the main source of interest in elliptic curves ultimately stems from the fact that their rational points form a group (actually, their $S$-points for any $k$-scheme $S$ do). We will describe how in this section.

Let $E/k$ be an elliptic curve with chosen basepoint $\infty\in E(k)$. Let $\Pic^0(E)\subset\Pic E=\ker\deg$ be the subgroup of (linear equivalence classes of) degree $0$ divisors. Consider the map

$$\mapdesc f{E(k)}{\Pic^0E}{p}{[p]-[\infty]}.$$

Let $X,Y\in\hom^0(\ints E(3[\infty]))$ be as in the previous section. We aim to show that the above map is a bijection. This will allows us to pullback the group structure on $\Pic^0E$ to one on $E(k)$. We first show injectivity. Suppose that we have $p,q\in E(k)$ such that $[p]-[\infty]=[q]-[\infty]$ so $[p]=[q]$. Consider the exact sequence

$$0\too\ints E(p-q)\too\ints E(p)\too\ints q\too0$$

This gives an injection $\hom^0(\ints E(p-q))\into\hom^0(\ints E(p))$. If $p\neq q$, then every section of $\ints E(p-q)$ must vanish at $q$, but $\hom^0(\ints E(p))$ is generated by the nowhere vanishing section $1$, so $\hom^0(\ints E(p-q))=0$ in this case which shows that $[p]\neq[q]\in\Cl E$ if $p\neq q\in E$.

Now, we show that $f$ is surjectivity. Let $D\in\Div E$ be a degree 0 divisor. Then, $D+[\infty]$ is degree 1, so there's some nonzero global section $s\in\hom^0(\ints E(D+[\infty]))$. As usual, this means that $D+[\infty]$ is equivalent to some degree 1, effective divisor $E$ which must be of the form $E=[p]$ for some $p\in E(k)$. Thus, $D=[p]-[\infty]=f(p)$, so $f$ is bijective.

This allow us to define a group law on $E(k)$ via $p+q=\inv f(f(p)+f(q))$. As constructed, this group law is potentially arbitrary. However, one can show that it is actually induced from a morphism $m:E\by E\to E$ of $k$-schemes. In fancier words, this group law is a manifestation of the fact that $E$ is a $k$-group scheme [^24]. We will use without proof the existence of the morphism $m$.

<div class="exercise">
    Show that the group law on $E(k)$ is characterized by the following 2 properties
    <ol>
        <li> The basepoint $\infty\in E(k)$ is the identity element. </li>
        <li> For any 3 points $p,q,r\in E(k)$ "lying on a line" (i.e. $p+q+r=(s)$ for some $s\in\hom^0(\ints E(D_3))$), we have
            $$p+q+r=0.$$
        </li>
    </ol>
</div>

## Isogenies

<div class="definition">
    Let $E,E'$ be elliptic curves over $k$. An <b>isogeny</b> $\phi:E\to E'$ is a morphism respecting base points, i.e. one such that $\phi(\infty)=\infty'$.
</div>

Since $E,E'$ are 1-dimensional, irreducible, we either have $\phi(E)=\infty'$ or $\phi(E)=E'$ for any isogeny $\phi$. Like before, given a non-constant isogeny $\phi:E\to E'$, we let $\deg\phi$ denote the degree of the field extension $k(E)/\pull\phi k(E')$.

Unless otherwise stated, assume that basically all isogenies below are nonzero.

<div class="example">
    For an elliptic curve $E$ and an integer $m\ge0$, there is a multiplication by $m$ isogeny $E\xto mE$. We will see later that $\deg m=m^2$.
</div>

One nice properties of isogenies is that they are automatically group homomorphisms.

<div class="proposition">
    Let $\phi:E_1\to E_2$ be an isogeny. Then, the induced map $E_1(k)\to E_2(k)$ is a group homomorphism.
</div>
<div class="proof4">
    Let $f_i:E_i(k)\to\Pic^0E_i$ ($i=1,2$) be the map you expect. Then, $\phi$ induces a group homomorphism $\push\phi:\Pic E_1\to\Pic E_2$ given on prime divisors (i.e. closed points) by $[p]\mapsto[\phi(p)]$. Hence, for $p,q\in E_1(k)$, we have
    $$\begin{align*}
    \phi(p+q)
    &=\phi(\inv f_1(f_1(p)+f_1(q)))\\
    &=\inv f_2(\push\phi(f_1(p)+f_1(q)))\\
    &=\inv f_2(\push\phi(f_1(p))+\push\phi(f_1(q)))\\
    &=\inv f_2(f_2(\phi(p))+f_2(\phi(q)))\\
    &=\phi(p)+\phi(q)
    \end{align*}$$
    Above we used the fact, which follows directly form the definitions, that $\push\phi(f_1(p))=f_2(\phi(p))$.
</div>

The above shows that isogenies basically correspond to homomorphisms between Picard groups. Under this correspondence, an isogeny $\phi:E_1\to E_2$ is paired with the homomorphism $\push\phi:\Pic^0E_1\to\Pic^0E_2$. However, there is another homomorphism of Picard groups naturally associated to $\phi$: the pullback $\pull\phi:\Pic E_2\to\Pic E_1$, so this too should correspond to some isogeny.

<div class="definition">
    Let $\phi:E_1\to E_2$ be an isogeny. Its <b>dual isogeny</b> $\wh\phi:E_2\to E_1$ is given by the composition
    $$E_2\iso\Pic^0E_2\xto{\pull\phi}\Pic^0E_1\iso E_1.$$
</div>
<div class="exercise">
    Show that formation of the dual isogeny satisfies
    $$\wh{\phi+\psi}=\wh\phi+\wh\psi$$
    and
    $$\wh{\phi\circ\psi}=\wh\psi\circ\wh\phi$$
    when each expression is defined.
</div>
<div class="exercise">
    Let $\phi_m:E\to E$ denote the multiplication by $m$ map on some elliptic curve $E$. Then, show that its dual isogeny $\wh\phi_m:E\to E$ is still multiplication by $m$ (hint: use that $\wh\phi+\wh\psi=\wh{\phi+\psi}$ in general)
</div>

Now, let $\phi:E_1\to E_2$ be an isogeny. The composition $\phi\circ\wh\phi:E_2\to E_2$ corresponds to the map $\push\phi\pull\phi:\Pic^0E_2\to\Pic^0E_2$ which is just multiplication by $(\deg\phi)$. Hence, $\phi\circ\wh\phi:E_2\to E_2$ is also multiplication by $\deg\phi$. We claim the same is true for the other composition $\wh\phi\circ\phi:E_1\to E_1$, i.e. that this is multiplication by $(\deg\phi)$. To see this, note that

$$(\wh\phi\circ\phi)\circ\wh\phi=\wh\phi\circ(\deg\phi)=(\deg\phi)\circ\wh\phi$$

where the last equality comes from $\wh\phi$ being a homomorphism. Since $\wh\phi$ is surjective, we conclude that $\wh\phi\circ\phi=\deg\phi$ (as functions). As a consequence of the last exercise, we get

<div class="corollary">
    The multiplication by $m$ map has degree $m^2$.
</div>

We can also show that $\deg\phi=\deg\wh{\phi}$ in general. From our above calculations on compositing an isogeny with its dual, this will follow from the following.

<div class="proposition">
    Let $\phi:E_1\to E_2$ be an isogeny, and let $\psi:E_2\to E_1$ be a map such that $\psi\circ\phi$ is multiplication by $m=\deg\phi$. Furthermore, $\psi=\wh\phi$. In particular, $\wh{\wh\phi}=\phi$.
</div>
<div class="proof4">
    We know that $\wh\phi\circ\phi=m$, so we have $(\psi-\wh\phi)\circ\phi=0$, the constant map. Since $\phi$ is surjective, this shows that $\psi-\wh\phi=0$, so we win.
    <br>
    For the claim that $\wh{\wh\phi}=\phi$, this follows from the fact that
    $$\phi\circ\wh\phi=m=\wh m=\wh{\phi\circ\wh\phi}=\wh{\wh\phi}\circ\wh\phi=\deg\wh\phi.$$
</div>

## Torsion Points

We now turn to understanding the structure of torsion points of an elliptic curve. In order to have a chance of getting nice results, fix an <b>algebraically closed</b> field $k$, and let $E/k$ be an elliptic curve. Let $E(k)[m]=\ker(m:E(k)\to E(k))$ denote the set of $m$-torsion points of $E(k)$ (note: since $k$ is algebraically closed, $E(k)$ is the set of all closed points) where $m\ge1$ is an integer. Our understanding of $E(k)[m]$ will rest on the following lemma relating the algebra of a morphism to its geometry.

<div class="lemma">
    Let $\phi:C_1\to C_2$ be a finite morphism of smooth curves over $k$. Then, there exists a dense open $U\subset C_2$ such that $\#\inv\phi(q)=\deg_s\phi$ for all closed $q\in U$, where $\deg_s=[k(C_1):k(C_2)]_s$ is the <b>separable degree</b> of $\phi$.
</div>
<div class="proof4">
    Start with an affine open $V=\spec A$ around the generic point $\eta_2\in C_2$ of $C_2$. Since $\phi$ is finite, we can write $U:=\inv\phi(V)=\spec B$ with $\phi:\spec B\to\spec A$ giving $B$ the structure of a finite $A$-module. Since $C_1,C_2$ are smooth curves, we claim that  the rings $A,B$ are Dedekind domains. It is clear that they are 1-dimensional (e.g. since open subsets of irreducible spaces are irreducible), noetherian domains, so we only need to show that they are integrally closed. Take $A$ for example. We have
    $$A=\bigcap_{\mfp\in\spec A}A_\mfp\subset\Frac A=k(C_2).$$
    By an earlier proposition, $A_\mfp$ is integrally closed for all $\mfp$, so $A$ is an intersection of integrally closed rings, and hence integrally closed. The same reasoning applies to $B$. Thus, $A\into B$ is an integral (because finite) extension of Dedekind domains. 
    <br>
    Hence, given some $q\in V$ (corresponding to a prime $\mfp\in\spec A$), determining $\inv\phi(q)$ is the same as determining the primes $\mfP\in\spec B$ lying above the given $\mfp\in\spec A$. Since every prime in a purely inseparable extension of Dedekind domains completely ramifies, as far as determining the set $\inv\phi(q)$ is considered, we lose no information if we assume that $\Frac B=k(C_1)$ is separable over $\Frac A=k(C_2)$. It is now a standard result from the theory of Dedekind domains that in any such situation, a (nonzero) prime $\mfp\in\spec A$ factors in $B$ as a product
    $$\mfp B=\prod_{i=1}^g\mfP_i^{e_i}$$
    of primes $\mfP_i\in\spec B$ with $n=[k(C_1):k(C_2)]=\sum_{i=1}^ge_if_i$ where $f_i=[B/\mfP_i/A/\mfp]$. Furthermore, the ramification indices $e_i$ are all equal to $1$ except for the (finite set of) primes dividing a certain "discriminant ideal" $\Delta_{B/A}\subset A$. Thus, we see that $\#\inv\phi(q)=\deg_s\phi$ for any (nonzero) $q$ in the open set $\spec A\sm V(\Delta_{B/A})$, and so we win.
</div>
<div class="corollary">
    Let $\phi:E_1\to E_2$ be an isogeny of elliptic curves over $k$. Then, $\#\inv\phi(q)=\deg\phi$ for all $q\in E_2(k)$.
</div>
<div class="proof4">
    Apply lemma to get this for a dense open, and then take any point and translate it into that dense open.
</div>

In the previous section we calculated that $\deg m=m^2$ (where $m$ is denoting both an integer and the multiplication by that integer map). With this in mind, fix any nonzero $m\in\Z$ such that $p:=\Char k\nmid m$. In this case, multiplication by $m$ is separable, so we get that [^25]

$$\# E(k)[m]=\#\inv m(\infty)=m^2$$

Let $G=E(k)[m]$. For any $d\mid m$, let $G[d]$ denote its $d$-torsion subgroup, so $G[d]=E(k)[d]$. Thus, $G$ is an abelian group of size $m^2$ whose $d$-torsion subgroup has size $d^2$ for all $d\mid m$. An argument inducting on the number of primes dividing $m$ then shows that this implies that $G\simeq\zmod m\oplus\zmod m$.

Now, what if $m=p^e$ for some $e\ge1$ (Here, we're assuming $p=\Char k\neq0$)? In this case, consider the $p$th power Frobenius map $\phi:E\to E$ which is the morphism $E\to E$ corresponding to the $p$ power map $k(E)\to k(E)$ on $E$'s function field [^26]. This map visibly has degree $p$ and separable degree $1$, so we see that

$$\# E[p^e]=\deg_s[p^e]=\deg_s(\wh\phi\circ\phi)^e=(\deg_s\wh\phi)^e\in\bracks{1,p^e}$$

where the ambiguity at the ends rests upon whether $\wh\phi$ is separable or inseparable. In the case that it is separable, $E[p^e]$ is a group of order $p^e$ whose $p^n$-torsion subgroup is of order $p^n$ for all $n\le e$. Another easy induction argument shows that this implies that $E[p^e]\simeq\zmod{p^e}$.

All in all, we have shown the following.

<div class="theorem">
    Let $m\in\Z$ be a nonzero integer, and let $p=\Char k\ge0$. Then,
    <ul>
        <li> If $m\neq0\in k$, i.e. if $p\nmid m$, we have
            $$E[m]=\Zmod m\oplus\Zmod m.$$
        </li>
        <li> If $\Char k=p>0$, then one of the following is true. Either
            $$E[p^e]=\{\infty\}$$
            for all $e\ge1$, or
            $$E[p^e]=\Zmod{p^e}$$
            for all $e\ge1$.
        </li>
    </ul>
</div>

# $\l$-adic Representations

To end this monster of a blog post, we will show how to use an Elliptic curve $E/\Q$ to construct an $\l$-adic representation of the absolute Galois group $G_\Q:=\Gal(\Qbar/\Q)$.

Fix an elliptic curve $E/\Q$. Note that the set (really, group) $E(\Qbar)$ (morphisms as $\Q$-schemes) is naturally isomorphic to $\bar E(\Qbar)$ (mophisms as $\Qbar$-schemes) for a uniquely determined elliptic curve $\bar E/\Qbar$ [^27], so the results of the previous (sub)section apply to $E(\Qbar)$. In particular, fixing a prime $\l$, for all $n\ge1$, we have

$$E(\Qbar)[\l^n]=\Zmod{\l^n}\oplus\Zmod{\l^n}.$$

Now, note that $G_\Q$ has a natural (left) action on $E(\Qbar)$. Spelled out, given $\Qbar$-point $x:\spec\Qbar\to E$ and an automorphism $\sigma\in G_\Q$, we let $\sigma\cdot x\in E(\Qbar)$ be the composition

$$\spec\Qbar\xto{\spec\sigma}\spec\Qbar\xto xE.$$

Since multiplication by $m$ is defined over $\Q$, this action commutes with the multiplication by $m$ map, and so restrictions to a linear action $G_\Q\actson E(\Qbar)[m]$ for all $m\ge1$. Thus, we have compatible maps

$$G_\Q\too\Aut(E(\Qbar)[\l^n])\simeq\Aut\parens{\Zmod{\l^n}\oplus\Zmod{\l^n}}$$

for all $n\ge1$. Letting, $T_\l(E):=\invlim_{n\ge1}E(\Qbar)[\l^n]$ be the <b>($\l$-adic) Tate module</b> and taking an inverse limit of the above maps, we get our desired representation

$$\rho_{E,\l}:G_\Q\too\Aut(T_\l(E))\simeq\Aut(\Z_\l\oplus\Z_\l)\simeq\GL_2(\Z_\l)\into\GL_2(\Q_\l)$$

of $G_\Q$.

Assuming I continue this series and things work out roughly the way I hope they do, we will in a later post show that this representation is irreducible.

[^1]: Not necessarily in this order
[^2]: On the off chance I succeed in writing this post and putting it online, I should mention that you can probably go straight to the part about curves, pretend the word scheme does not exist, and still manage to follow. I hope to make things fairly concrete because then there is less theory I need to remember how to set up
[^3]: collection of charts
[^4]: All of this data is still there, but now neatly packaged into the structure sheaf $\ints X$ 
[^5]: In either case, the morphism of sheaves is not required to have much of anything to do with the map on underlying spaces
[^6]: In the classical setting, $A=k[x_1,\dots,x_n]/\sqrt I$ is a f.g. $k$-algebra and $\spec A$ corresponds to the set $V(I)=\bracks{(a_1,\dots,a_n)\in k^{\oplus n}:f(a_1,\dots,a_n)=0\,\forall f\in I}\subset k^{\oplus n}$, so the global functions on $V(I)=\spec A$ are given by $A=k[x_1,\dots,x_n]/\sqrt I$.
[^7]: I'll include exercise. I encourage you to do some (but probably not all) of them just to have practice thinking about this stuff.
[^8]: I feel like I keep semi-accidentally writing super long posts, and I'm not a fan of this (especially this one. It probably did not need to be anywhere near this long)
[^9]: Given $\msF\in\Ab(X)$, embed the stalk $\msF_x\into I_x$ into an injective group. For each $x\in X$, let $j_x:\{x\}\into X$ denote the inclusion, and consider the sheaf $\msI=\prod_{x\in X}j_{x,* }(I_x)$ where $I_x$ is viewed as a sheaf on $\{x\}$. This is an injective sheaf into which $\msF$ embeds.
[^10]: Exercise: prove this. Hint: one way of thinking about why this is true is that this condition turns cech cohomology into a $\delta$-functor vanishing on injective objects
[^11]: It's an (annoying to prove) theorem that cohomology (for the sheaves we care about) vanish in degrees above the dimension of the underlying space
[^12]: I know this notation is trash, but it's also short-lived
[^13]: Hints: (1) A uniformizer in $\ints{C,p}\subset k(C)$ is like a local coordinate centered at $p$ and (2) the function field $k(C)$ is the stalk at the generic point $\eta\in C$ (i.e. the point contained in all open sets (i.e. the point whose closure is all of $C$ (i.e. the point corresponding to the zero ideal in any affine open)))
[^14]: You may also want to appeal to <b>Nike's trick</b>: for $\spec A,\spec B\subset X$ affines in a general scheme $X$, we can cover the intersection $\spec A\cap\spec B$ with affines $U$ that are distinguished in both $\spec A,\spec B$ (i.e. $U=\spec A_a\subset\spec A$ and $U=\spec B_b\subset\spec B$ for some $a\in A$ and $b\in B$)
[^15]: Really, I'll claim without proof
[^16]: Plus all the other stuff I've asked you to take for granted
[^17]: For example, if you are working over $\C$ where you have access to topological methods, then $f$ is generally (and I think always) a function of the chern classes of $\msF$ which only see the bundle's underlying topology (and not its complex/holomorphic structure)
[^18]: and also retroactively for some of the earlier stuff (e.g. Serre duality)
[^19]: This boils down to the fact that the unit ideal $(1)=A$ of a ring $A$ has a finite set of generators.
[^20]: I haven't thought this through, so I could be wrong, but for curves, the given definition of completeness is the same as being proper. Briefly, Riemann-Roch (+ some work) shows that a complete curve $C$ can be embedded in some projective space $\P_k^N$ (as a closed subset), but projective space is proper and so its closed subsets are too.
[^21]: This it the standard way to label the indices for some reason. I guess note that the index + the valuation of the corresponding monomial always equals 6
[^22]: I think these are the right substitutions. I haven't actually checked
[^23]: The part before elliptic curves is kinda messy right now because of a long series of rewriting it as I realized setting things up would be a more involved process than i anticipated. If you read it, watch out for typos/mistakes (In particular, watch out for places where I'm implicitly assuming a field is algebraically closed when I shouldn't be). If you find mistakes (or if things are unclear), leave a comment
[^24]: By Yoneda, to show this, it suffices to give $E(S)$ a (functorial in $S$) group law for all $k$-schemes $S$. I believe, but have not checked, that one can do this by showing that $E(S)$ is in natural bijection with $\Pic^0(E\by_kS)$ where $E\by_kS$ is the (categorical) pullback of $E\to\spec k\from S$.
[^25]: The middle expression here really shows that I made some poor choices of notation
[^26]: I did not touch on this before, but morphisms between smooth curves are in bijection field maps between their function fields.
[^27]: $\bar E$ is the "base change of $E$ to $\Qbar$". Intuitively, it results from taking $E/\Q$ and then extending scalars from $\Q$ to $\Qbar$. 