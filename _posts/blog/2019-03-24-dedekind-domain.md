---
layout: post
title: "Dedekind Domains Done Right"
modified:
categories: blog
excerpt:
tags: [math, Dedekind domain, localization, cayley-hamilton]
date: 2019-03-26 00:00:00
---

I've wanted to write this post for a long time now. Dedekind domain's are, objectively, the best rings in existence [^2], and their greatness stems from one fact: ideals in a Dedekind domain factor uniquely into (finite) products of prime ideals. However, I've never seen a proof of this fact that I liked (i.e. one that's straightforward enough for me to actually remember) [^1], and so this post is my attempt to remedy this situation. Like (almost) always, I'll start by introducing some background I'll need in the proof, and then I'll actually get into the good stuff in a separate section.

# Background

I'll start with a fact about localizations that I think I've used before on this blog, but never actually stated/proven.

First, observe that given a ring $R$, a multiplicative set $S\subset R$, and an $R$-module $M$, we can form an $\sinv R$-module $\sinv M$ which we call the localization of $M$ at $S$ (away from $S$? I can never remember what preposition to use). The construction is exactly what you expect: elements of $\sinv M$ are formal fractions $\frac ms$ with $m\in M$ and $s\in S$, and we say that

$$\frac ms=\frac nt\iff\exists u\in S:u\cdot(t\cdot m-s\cdot n)=0,$$

where we've explicitly used $\cdot$ to emphasize that $m,n$ are module elements while $u,s,t$ are ring elements. If you know about tensor products, then you can show that we also have

$$\sinv M\simeq M\otimes_R\sinv R,$$

so localization is really just extension of scalars. Now, onto the fact.

<div class="proposition">
    Let $M$ be an $R$-module. Then, $M=0\iff M_\mfm=0$ for all maximal ideals $\mfm\subset M$.
</div>
<div class="proof4">
    On of these directions is easy, so we'll prove the other one. Assume that $M_\mfm=0$ for all maximal ideals $\mfm\subset R$, and suppose that $M\neq0$. Fix some nonzero $x\in M$, and let $\mfm$ a maximal ideal containing
    $$\ann(x)=\bracks{r\in R:r\cdot x=0}\subsetneq R.$$
    Then, $\frac x1=\frac01\in M_\mfm$ so there exists some $u\in R\sm\mfm\subset R\sm\ann(x)$ such that $u\cdot x=0$. This means that $u\in(R\sm\ann(x))\cap\ann(x)=\emptyset$, which is just wonderful. 
</div>

The real utility of this proposition comes from the fact that given an $R$-linear map $f:M\to N$, and a multiplicative set $S\subset M$, we can always form the $\sinv R$-linear map $\sinv f:\sinv M\to\sinv N$ given by $\sinv f(m/s)=f(m)/s$.

<div class="exercise">
    Show that we always have $\im(\sinv f)=\sinv\im(f)$ and $\ker(\sinv f)=\sinv\ker(f)$, so localization commutes with taking images and kernels. Also show localization commutes with forming quotients if you feel like it.
</div>
<div class="corollary">
    Let $f:M\to N$ be a map between $R$-modules. Then, $f$ is an injection (or surjection or bijection) iff $f_\mfm$ is an injection (or surjection or bijection) for all maximal $\mfm\subset R$.
</div>
<div class="proof4">
    Use exercise to apply the proposition to $\ker(f)$ and $\coker(f)=N/\im(f)$.
</div>

That's one thing down. The second thing we'll need is generalized Cayley-Hamilton.

<div class="theorem" name="Cayley-Hamilton">
    Let $M$ be an $R$-module generated by $n$ elements, and let $T:M\to M$ be some $R$-linear map. Then, there exists a monic polynomial $f\in R[x]$ of degree $n$ such that $f(T)=0\in\End_R(M)$.
</div>
<div class="proof4">
    First, fix a surjection $\pi:R^n\to M$, and note that we can form a commutative square
    <center>
        <img src="{{ site.url }}/images/blog/dedekind-domain/ch.png" width="150" height="100">
    </center>
    and so lift $T$ to a map $\alpha:R^n\to R^n$. The top map comes from the fact that $R^n$ is free so we can construct it by choosing any lifts of $T(\pi(e_i))$ for $e_1,\dots,e_n$ a basis for $R^n$. Furthermore, this lift is nice in that $p(\alpha)\in\End_R(R^n)$ lifts $p(T)\in\End_R(M)$ for any $p\in R[x]$, so to prove the theorem, it suffices to find some $f\in R[x]$ s.t. $f(\alpha)=0$. Since $R^n$ is free, we have a matrix $(a_{ij})_{i,j=1}^n$ defined by writing $\alpha(e_j)=\sum_{i=1}^na_{ij} e_i$. With this in mind, let $A=\Z\sqbracks{\bracks{x_{ij}}_{i,j=1}^n}$, and consider the universal matrix
    $$S=\Mat{x_{11}}\cdots{x_{1n}}\vdots\ddots\vdots{x_{n1}}\cdots{x_{nn}}\in\End_A(A^n).$$
    Now, let $\pi_T:A\to R$ be the homomorphism determined by $\pi_T(x_{ij})=a_{ij}$ for all $i,j$. With this map, we are reduced to finding some $g\in A[x]$ s.t. $g(S)=0$ since then applying $\pi_T$ gives some $f\in R[x]$ s.t. $f(\alpha)=0$. Luckily for us, $A$ is a domain, so we can take $g(x)=\det(xI-S)$ where $I$ is the identity matrix. To see why this works note that we can embed $\Frac(S)\into\C$ (since $\trdeg_{\Q}\Frac(S)<\trdeg_{\Q}\C$ and $\C$ algebraically closed) and so we are reduced to Cayley-Hamilton over $\C$ where this choice of $g$ definitely works.
</div>

# The Good Stuff

Now we're here. Before getting in Dedekind domains, let's briefly discuss dvrs (which we'll see are just local Dedekind domains).

<div class="definition">
    Let $K$ be a field and $\Gamma$ be a totally ordered abelian group. A <b>valuation</b> $v:\units K\to\Gamma$ is a map such that
    <ol>
        <li> $v(ab)=v(a)+v(b)$ for all $a,b\in\units K$. </li>
        <li> $v(a+b)\ge\min(v(a),v(b))$ with equality if $v(a)\neq v(b)$ for all $a,b\in\units K$.</li>
    </ol>
    We sometimes also say $v(0)=\infty$. A valuation is <b>discrete</b> if $\Gamma=\Z$.
</div>
<div class="definition">
    Given a discrete valuation $v:\units K\to\Z$, its associated <b>discrete valuation ring (dvr)</b> is
    $$R=\bracks{\alpha\in\units K:v(\alpha)\ge0}\cup\{0\}.$$
</div>

Dvrs are very nice as detailed in the following theorem.

<div class="theorem">
    Let $R$ be a dvr with valuation $v:\units{\Frac(R)}\to\Z$. Then,
    <ol>
        <li> $R$ is a domain. </li>
        <li> $\alpha\in\units R\iff v(\alpha)=0$. </li>
        <li> $\mfm=\bracks{\alpha\in R:v(\alpha)>0}$ is maximal (this and 2. imply that $R$ is local) </li>
        <li> $\mfm=(t)$ for any $t\in R$ with $v(t)=1$. </li>
        <li> $R$ is a PID </li>
        <li> Any $x\in R$ is of the form $x=ut^n$ with $u\in\units R$ and $v(t)=1$. (this and 5. imply that every ideal of $R$ is of the form $(t^n)$ for some $n$) </li>
    </ol>
</div>
<div class="proof4">
    <ol>
        <li>
            If $a,b\in R$ are nonzero, then $v(ab)=v(a)+v(b)$ is finite, so $ab\neq0$.
        </li>
        <li>
            $ab=1$ implies that $v(a)+v(b)=v(1)=0$. Since $v(a),v(b)\ge0$, we must have $v(a)=v(b)=0$. Conversely, assume $v(a)=0$, and pick $b\in K$ s.t. $ab=1$. Then, $v(b)=v(a)+v(b)=v(1)=0$, so $b\in R$ and hence $a\in\units R$.
        </li>
        <li>
            If $a,b\in\mfm$ and $r\in R$, then $v(rb)=v(r)+v(b)>0$ and $v(a+b)\ge\min(v(a),v(b))>0$ so $\mfm$ is an ideal. Since it's literally all the nonunits by 2., it's maximal and the only maximal ideal.
        </li>
        <li>
            Fix $t\in R$ with $v(t)=1$, and fix any nonzero $r\in\mfm$. There exists $\alpha\in\Frac(R)$ such that $\alpha t=r$, so $v(\alpha)+1=v(\alpha)+v(t)=v(r)>0$. Thus, $v(\alpha)\ge0$, so $\alpha\in R$ and $r\in(t)$.
        </li>
        <li>
            Let $I\subset R$ be an ideal and fix $t\in I$ with minimal valuation. Let $r\in I$ be any other nonzero element, and again fix $\alpha\in\Frac(R)$ s.t. $\alpha t=r$. Then, $v(\alpha)+v(t)=v(r)\ge v(t)$, so $v(\alpha)\ge 0$ which menas $\alpha\in R$ and $r\in(t)$, so $I=(t)$.
        </li>
        <li>
            Fix some $x\in R$, and let $n=v(x)$. There's some $u\in\Frac(R)$ such that $ut^n=x$, so $v(u)+n=v(u)+v(t^n)=v(x)=n$. Hence, $v(u)=0$, so $u\in\units R$.
        </li>
    </ol>
</div>

And finally, what is a Dedekind domain?

<div class="definition">
    An integral domain $R$ is a <b>Dedekind domain</b> if it is 1-dimensional, integrally closed, and noetherian.
</div>
<div class="example">
    Any PID is a Dedekind domain.
</div>
<div class="example">
    Let $K/\Q$ be a finite extension, and let $\ints K\subset K$ be the integral closure of $\Z$ in $K$. Then, $\ints K$ is Dedekind (More generally, the integral closure of a Dedekind domain in a field is Dedekind).
</div>
<div class="example">
    Let $k$ be algebraically closed, and let $f\in k[x_1,\dots,x_n]$ be irreducible and "smooth," i.e. for all $c\in k^n$, (at least) one of $f(c),\pderiv f{x_1}(c),\dots,\pderiv f{x_n}(c)$ is nonzero. Then, $k[x_1,\dots,x_n]/(f)$ is a Dedekind domain.
</div>

I'll leave verifying these examples up to you. Our first lemma is that local Dedekind domains are dvrs.

<div class="lemma">
    Let $A$ be a local Dedekind domain. Then, $A$ is a dvr.
</div>
<div class="proof4">
    Let $\mfm\subset A$ be its maximal ideal, and fix any $t\in\mfm\sm\mfm^2$. We claim that $\mfm=(t)$. First note that $\bar\mfm\subset A/(t)$ is the unique maximal ideal of the local 0-dimensional noetherian (hence local artinian) ring $A/(t)$ and so is nilpotent. Hence, $\mfm^n\subset(t)$ for some $n\ge1$. Suppose that $n>1$ and that $\mfm^{n-1}\not\subset(t)$; choose any $r\in\mfm^{n-1}\sm(t)$. Note that, given any $m\in\mfm$, we have $rm\in(t)\cap\mfm^n\subset(t)\cap\mfm^2$, so the multiplication map
    $$\frac rt:\mfm\to\mfm$$
    is $A$-linear. Hence, Cayley-Hamilton implies that $\frac rt\in\Frac(A)$ is integral over $A$. Since $A$ is integrally closed, we have $r/t\in A$ which contradicts $r\in\mfm^{n-1}\sm(t)$. Hence, $\mfm^{n-1}\subset(t)$, and induction then shows that in fact $\mfm\subset(t)\subsetneq A$, so $\mfm=(t)$. Now, given any $x\in A\sm\{0\}$, let $v(x)\in\Z_{\ge0}$ be the highest power of $t$ dividing $x$. This is well-defined because if $t^n\mid x\neq0$ for all $n$, then we could form the infinite chain
    $$\parens{x}\subsetneq\parens{\frac xt}\subsetneq\parens{\frac x{t^2}}\subsetneq\parens{\frac x{t^3}}\subsetneq\cdots,$$
    which contradicts $A$ being noetherian. Furthermore, it is clear that $v(ab)=v(a)+v(b)$ always and that $v(a+b)\ge\min(v(a),v(b))$ with equality if $v(a)\neq v(b)$ because that's how division works. Now, note that $v$ extends to a map $\units{\Frac(A)}\to\Z$ via $v(x/y)=v(x)-v(y)$. To finish, we need to show that
    $$A=\bracks{\alpha\in\units{\Frac(A)}:v(\alpha)\ge0}\cup\{0\}.$$
    This is because if $v(\alpha)\ge0$, then we can write $\alpha=x/y$ for some $x,y\in A$ with $v(y)=0$. However, $v(y)=0\implies y\in A\sm(t)=A\sm\mfm=\units A$ so $\alpha=x/y\in A$. 
</div>
<div class="corollary">
    A ring $A$ is a dvr iff $A$ is a local Dedekind domain iff $A$ is a local PID.
</div>

The above was most of the work in proving this theorem about factoring ideals into primes. The rest of the proof is essentially the observation that localizing a Dedekind domain at a prime gives you a local Dedekind domain.

<div class="theorem" name="Structure Theorem">
    Let $A$ be a Dedekind domain, and let $(0)\neq I\subset A$ be an ideal. Then, $I$ factors into a unique finite product of prime ideals.
</div>
<div class="proof4">
    Fix any nonzero prime (i.e. maximal) $\mfp\subset A$. Since localizations preserve noetherianness and integral closednesss and since the only prime inside of $\mfp$ is $(0)$ (i.e. $\mfp$ has height 1), we see that $A_\mfp$ is a local Dedekind domain, and so a dvr. Hence, $IA_\mfp=(\mfp A_\mfp)^{v_{\mfp}(I)}$ for some $v_{\mfp}(I)\in\Z_{\ge0}$. Let
    $$J=\prod_{(0)\neq\mfp\in\spec A}\mfp^{v_\mfp(I)}=\bigcap_{(0)\neq\mfp\in\spec A}\mfp^{v_\mfp(I)},$$
    and note that $I\subseteq J$ since $I\subseteq IA_\mfp\cap A=\mfp^{v_\mfp(I)}$ for all $\mfp$. Since the inclusion $I\into J$ is (by construction) locally an isomorphism (i.e. $I_\mfp=J_\mfp$), we conclude that in fact $I=J$, so $I$ is a product of primes. This product is unique since the exponents are recoverable via localization, so we only need to show that this product is finite (i.e. that $v_\mfp(I)=0$ almost always). This is equivalent to the claim that $I$ is contained in only finitely many maximal ideals, but that's true since $A/I$ is Artinian and Artinian rings only have finitely many maximal ideals. Thus, we win.
</div>

Well, that wasn't so bad, was it? I feel like this is a nice proof because it doesn't require many technical lemmas and you can even get away with not mentioning fraction ideals. To end this post, you can try proving a converse to the structure theorem.

<div class="exercise">
    Let $A$ be an integral domain such that every nonzero ideal $I\subset A$ factors uniquely into a finite product of prime ideals. Show that $A$ is a Dedekind domain.
</div>

[^1]: Although Serre comes close in his "Local Fields" book (maybe I should also admit that I've only seen two approaches aside from the one I'll show here). I should also add that when I say "never seen," I mean excluding the approach in this post; this proof was outlined in one of my classes, but I don't know where else it's written down.
[^2]: Fight me